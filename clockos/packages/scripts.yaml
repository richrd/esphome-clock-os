################################################################
# Scripts used and provided by ClockOS
################################################################
script:
  # Toggle a Home Assistant entity
  - id: clockos_script_toggle_ha_entity
    parameters:
      entity_id: string
    then:
      - logger.log: "Trying to toggle HA entity"
      - logger.log:
          format: "Entity id %s"
          args:
            - entity_id.c_str()
      - homeassistant.service:
          service: homeassistant.toggle
          data:
            entity_id: !lambda 'return entity_id.c_str();'

  # Navigate back to the main menu
  - id: clockos_script_back_to_menu
    then:
    - lambda: 'id(clockos_global_knob_press_handled) = false;'
    - display_menu.show: clockos_menu_main

  # Navigate back to the main menu
  - id: clockos_script_back_to_main_page
    then:
    - lambda: 'ESP_LOGW("script", "Back to main page");'
    - display_menu.hide: clockos_menu_main
    - display.page.show: clockos_page_main
